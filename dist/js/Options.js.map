{"version":3,"sources":["../../js/Options.js"],"names":["Options","props","filters","setFilter","React","Component","Sorting","e","selectedValue","target","value","setSorting","bind","HostFilter","state","myGlobals","hostsCollection","getAll","then","response","setState","hosts","body","loaded","console","log","undefined","hostId","sortedHosts","sort","a","b","aData","data","bData","hostname","localeCompare","hostElements","map","host","id","LanguageFilter","languageCollection","items","languageCode","sortedItems","priorityValue","elements","item","code","LengthFilter","minLength","maxLength","parts","split","DateFilter","prop","maxCreatedAt","ts","moment","startOf","toDate","getTime","newValues","min","minCreatedAt","format","max","setDate","PriorityFilter","minPriority","ContentTypeFilter","contentType"],"mappings":"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","file":"Options.js","sourcesContent":["class Options extends React.Component {\n\n  render() {\n    return (\n      <div className='options'>\n        <DateFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <PriorityFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <ContentTypeFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n      </div>\n    );\n    // language, lenght, created\n  }\n}\n\nclass Sorting extends React.Component {\n\n  setSorting(e) {\n\n    const selectedValue = e.target.value;\n\n    if (selectedValue === \"\") {\n\n      this.props.setSorting();\n      return;\n    }\n\n    this.props.setSorting(selectedValue);\n  }\n\n  render() {\n\n    return (\n      <select onChange={this.setSorting.bind(this)}>\n        <option value=\"\">Sort by...</option>\n        <option value=\"title\">Title</option>\n        <option value=\"contentLengthInCharacters\">Content length</option>\n        <option value=\"-createdAt\">Date added</option>\n      </select>\n    );\n  }\n}\n\nclass HostFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.hostsCollection.getAll()\n    .then((response) => {\n      this.setState({hosts: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    console.log('HostFilter');\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ hostId: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedHosts = this.state.hosts.sort\n    ((a, b) => {\n      const aData = a.data();\n      const bData = b.data();\n      return aData.hostname.localeCompare(bData.hostname);\n    });\n    let hostElements = sortedHosts.map((host) => {\n\n      return <option key={host.data().id} value={host.data().id}>{host.data().hostname}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by hostname...</option>\n        {hostElements}\n      </select>\n    );\n  }\n}\n\nclass LanguageFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.languageCollection.getAll()\n    .then((response) => {\n      this.setState({items: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ languageCode: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedItems = this.state.items.sort((a, b) => a.data().priorityValue - b.data().priorityValue);\n    let elements = sortedItems.map((item) => {\n\n      return <option key={item.data().code} value={item.data().code}>{item.data().code}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by language...</option>\n        {elements}\n      </select>\n    );\n  }\n}\n\nclass LengthFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value;\n    let minLength, maxLength;\n    if (value !== \"\") {\n      const parts = value.split('-');\n      minLength = parts[0];\n      maxLength = parts[1]\n    }\n    this.props.setFilter({ minLength: minLength, maxLength: maxLength });\n  }\n\n  render() {\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by length...</option>\n        <option value=\"0-2000\">Short</option>\n        <option value=\"2001-7000\">Middle</option>\n        <option value=\"7000\">long</option>\n      </select>\n    );\n  }\n}\n\nclass DateFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setDate(prop, e) {\n\n    const selectedValue = e.target.value;\n\n    if (selectedValue === \"\") {\n\n      this.props.setFilter({ maxCreatedAt: undefined });\n      return;\n    }\n\n    const ts = moment(selectedValue).startOf(\"day\").toDate().getTime();\n    const newValues = {};\n    newValues[prop] = ts;\n    this.props.setFilter(newValues);\n  }\n\n  render() {\n\n    const min = moment(this.props.filters.minCreatedAt).format('YYYY-MM-DD');\n    const max = moment(this.props.filters.maxCreatedAt).format('YYYY-MM-DD');\n\n    return (\n      <span>\n        From: <input type=\"date\" name=\"minCreatedAt\" value={min}\n                     onChange={this.setDate.bind(this, 'minCreatedAt')} />\n        To: <input type=\"date\" name=\"maxCreatedAt\" value={max}\n                   onChange={this.setDate.bind(this, 'maxCreatedAt')} />\n      </span>\n    );\n  }\n}\n\nclass PriorityFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ minPriority: value });\n  }\n\n  render() {\n\n    return (\n      <select value={this.props.filters.minPriority} onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Min priority...</option>\n        <option value=\"20\">Low</option>\n        <option value=\"15\">Normal</option>\n        <option value=\"10\">High</option>\n      </select>\n    );\n  }\n}\n\nclass ContentTypeFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ contentType: value });\n  }\n\n  render() {\n\n    return (\n      <select value={this.props.filters.contentType} onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Content type...</option>\n        <option value=\"\">All</option>\n        <option value=\"text\">Texts</option>\n        <option value=\"video\">Videos</option>\n      </select>\n    );\n  }\n}\n\n"]}
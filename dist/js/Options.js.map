{"version":3,"sources":["../../js/Options.js"],"names":["Options","props","sorting","setSorting","filters","setFilter","React","Component","Sorting","e","selectedValue","target","value","bind","HostFilter","state","myGlobals","hostsCollection","getAll","then","response","setState","hosts","body","loaded","console","log","undefined","hostId","sortedHosts","sort","a","b","aData","data","bData","hostname","localeCompare","hostElements","map","host","id","LanguageFilter","languageCollection","items","languageCode","sortedItems","priorityValue","elements","item","code","LengthFilter","minLength","maxLength","parts","split","DateFilter","minCreatedAt","date","moment","startOf","subtract","realdate","toDate","timestamp","getTime"],"mappings":"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","file":"Options.js","sourcesContent":["class Options extends React.Component {\n\n  render() {\n    return (\n      <div className='options'>\n        <Sorting value={this.props.sorting} setSorting={this.props.setSorting} />\n        <HostFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <LanguageFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <LengthFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <DateFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n      </div>\n    );\n    // language, lenght, created\n  }\n}\n\nclass Sorting extends React.Component {\n\n  setSorting(e) {\n\n    const selectedValue = e.target.value;\n\n    if (selectedValue === \"\") {\n\n      this.props.setSorting();\n      return;\n    }\n\n    this.props.setSorting(selectedValue);\n  }\n\n  render() {\n\n    return (\n      <select onChange={this.setSorting.bind(this)}>\n        <option value=\"\">Sort by...</option>\n        <option value=\"title\">Title</option>\n        <option value=\"contentLengthInCharacters\">Content length</option>\n        <option value=\"-createdAt\">Date added</option>\n      </select>\n    );\n  }\n}\n\nclass HostFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.hostsCollection.getAll()\n    .then((response) => {\n      this.setState({hosts: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    console.log('HostFilter');\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ hostId: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedHosts = this.state.hosts.sort\n    ((a, b) => {\n      const aData = a.data();\n      const bData = b.data();\n      return aData.hostname.localeCompare(bData.hostname);\n    });\n    let hostElements = sortedHosts.map((host) => {\n\n      return <option key={host.data().id} value={host.data().id}>{host.data().hostname}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by hostname...</option>\n        {hostElements}\n      </select>\n    );\n  }\n}\n\nclass LanguageFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.languageCollection.getAll()\n    .then((response) => {\n      this.setState({items: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ languageCode: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedItems = this.state.items.sort((a, b) => a.data().priorityValue - b.data().priorityValue);\n    let elements = sortedItems.map((item) => {\n\n      return <option key={item.data().code} value={item.data().code}>{item.data().code}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by language...</option>\n        {elements}\n      </select>\n    );\n  }\n}\n\nclass LengthFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value;\n    let minLength, maxLength;\n    if (value !== \"\") {\n      const parts = value.split('-');\n      minLength = parts[0];\n      maxLength = parts[1]\n    }\n    this.props.setFilter({ minLength: minLength, maxLength: maxLength });\n  }\n\n  render() {\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by length...</option>\n        <option value=\"0-2000\">Short</option>\n        <option value=\"2001-7000\">Middle</option>\n        <option value=\"7000\">long</option>\n      </select>\n    );\n  }\n}\n\nclass DateFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const selectedValue = e.target.value;\n\n    if (selectedValue === \"\") {\n\n      this.props.setFilter({ minCreatedAt: undefined });\n      return;\n    }\n\n    const date = moment().startOf(\"days\").subtract(selectedValue - 1, \"days\");\n    const realdate = date.toDate();\n    const timestamp = realdate.getTime();\n    this.props.setFilter({ minCreatedAt: realdate });\n  }\n\n  render() {\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by age...</option>\n        <option value=\"1\">Today</option>\n        <option value=\"2\">Yesterday</option>\n        <option value=\"7\">This week</option>\n        <option value=\"14\">Two weeks</option>\n        <option value=\"30\">One month</option>\n        <option value=\"60\">Two months</option>\n        <option value=\"9999\">All time</option>\n      </select>\n    );\n  }\n}\n"]}
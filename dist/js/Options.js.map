{"version":3,"sources":["../../js/Options.js"],"names":["Options","props","filters","setFilter","React","Component","Sorting","e","selectedValue","target","value","setSorting","bind","HostFilter","state","myGlobals","hostsCollection","getAll","then","response","setState","hosts","body","loaded","console","log","undefined","hostId","sortedHosts","sort","a","b","aData","data","bData","hostname","localeCompare","hostElements","map","host","id","LanguageFilter","languageCollection","items","languageCode","sortedItems","priorityValue","elements","item","code","LengthFilter","maxLength","DateFilter","prop","ts","moment","startOf","toDate","toISOString","newValues","min","minCreatedAt","format","max","maxCreatedAt","setDate","PriorityFilter","minPriority","ContentTypeFilter","contentType"],"mappings":"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","file":"Options.js","sourcesContent":["class Options extends React.Component {\n\n  render() {\n    return (\n      <div className='options'>\n        <DateFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <PriorityFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <ContentTypeFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <LengthFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n      </div>\n    );\n    // language, lenght, created\n  }\n}\n\nclass Sorting extends React.Component {\n\n  setSorting(e) {\n\n    const selectedValue = e.target.value;\n\n    if (selectedValue === \"\") {\n\n      this.props.setSorting();\n      return;\n    }\n\n    this.props.setSorting(selectedValue);\n  }\n\n  render() {\n\n    return (\n      <select onChange={this.setSorting.bind(this)}>\n        <option value=\"\">Sort by...</option>\n        <option value=\"title\">Title</option>\n        <option value=\"contentLengthInCharacters\">Content length</option>\n        <option value=\"-createdAt\">Date added</option>\n      </select>\n    );\n  }\n}\n\nclass HostFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.hostsCollection.getAll()\n    .then((response) => {\n      this.setState({hosts: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    console.log('HostFilter');\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ hostId: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedHosts = this.state.hosts.sort\n    ((a, b) => {\n      const aData = a.data();\n      const bData = b.data();\n      return aData.hostname.localeCompare(bData.hostname);\n    });\n    let hostElements = sortedHosts.map((host) => {\n\n      return <option key={host.data().id} value={host.data().id}>{host.data().hostname}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by hostname...</option>\n        {hostElements}\n      </select>\n    );\n  }\n}\n\nclass LanguageFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.languageCollection.getAll()\n    .then((response) => {\n      this.setState({items: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ languageCode: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedItems = this.state.items.sort((a, b) => a.data().priorityValue - b.data().priorityValue);\n    let elements = sortedItems.map((item) => {\n\n      return <option key={item.data().code} value={item.data().code}>{item.data().code}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by language...</option>\n        {elements}\n      </select>\n    );\n  }\n}\n\nclass LengthFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    this.props.setFilter({ maxLength: e.target.value });\n  }\n\n  render() {\n\n    return (\n      <span>Max length: <input type=\"text\" className=\"maxLength\" value={this.props.filters.maxLength} onChange={this.setFilter.bind(this)} /></span>\n    );\n  }\n}\n\nclass DateFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setDate(prop, e) {\n\n    const selectedValue = e.target.value;\n\n    let ts;\n    if (selectedValue === \"\") {\n      ts = undefined;\n    } else {\n      ts = moment(selectedValue).startOf(\"day\").toDate().toISOString();\n    }\n\n    const newValues = {};\n    newValues[prop] = ts;\n    this.props.setFilter(newValues);\n  }\n\n  render() {\n\n    const min = moment(this.props.filters.minCreatedAt).format('YYYY-MM-DD');\n    const max = moment(this.props.filters.maxCreatedAt).format('YYYY-MM-DD');\n\n    return (\n      <span>\n        From: <input type=\"date\" name=\"minCreatedAt\" value={min}\n                     onChange={this.setDate.bind(this, 'minCreatedAt')} />\n        To: <input type=\"date\" name=\"maxCreatedAt\" value={max}\n                     onChange={this.setDate.bind(this, 'maxCreatedAt')} />\n      </span>\n    );\n  }\n}\n\nclass PriorityFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ minPriority: value });\n  }\n\n  render() {\n\n    return (\n      <span>\n        Min prio:\n        <select value={this.props.filters.minPriority} onChange={this.setFilter.bind(this)}>\n          <option value=\"\">Min priority...</option>\n          <option value=\"20\">Low</option>\n          <option value=\"15\">Normal</option>\n          <option value=\"10\">High</option>\n        </select>\n      </span>\n    );\n  }\n}\n\nclass ContentTypeFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ contentType: value });\n  }\n\n  render() {\n\n    return (\n      <span>\n        Type:\n        <select value={this.props.filters.contentType} onChange={this.setFilter.bind(this)}>\n          <option value=\"\">Content type...</option>\n          <option value=\"\">All</option>\n          <option value=\"text\">Texts</option>\n          <option value=\"video\">Videos</option>\n        </select>\n      </span>\n    );\n  }\n}\n\n"]}
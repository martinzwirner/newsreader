{"version":3,"sources":["../../js/Options.js"],"names":["Options","props","filters","setFilter","sorting","setSorting","React","Component","Sorting","e","selectedValue","target","value","bind","HostFilter","state","myGlobals","hostsCollection","getAll","then","response","setState","hosts","body","loaded","console","log","undefined","hostId","sortedHosts","sort","a","b","aData","data","bData","hostname","localeCompare","hostElements","map","host","id","LanguageFilter","languageCollection","items","languageCode","sortedItems","priorityValue","elements","item","code","LengthFilter","maxLength","DateFilter","prop","ts","moment","startOf","toDate","toISOString","newValues","min","minCreatedAt","format","max","maxCreatedAt","setDate","PriorityFilter","minPriority","ContentTypeFilter","contentType","IsViewedFilter","isViewed","checked"],"mappings":"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","file":"Options.js","sourcesContent":["class Options extends React.Component {\n\n  render() {\n    return (\n      <div className='options'>\n        <DateFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <PriorityFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <ContentTypeFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <LengthFilter filters={this.props.filters} setFilter={this.props.setFilter} /><br />\n        <IsViewedFilter filters={this.props.filters} setFilter={this.props.setFilter} />\n        <Sorting sorting={this.props.sorting} setSorting={this.props.setSorting} />\n      </div>\n    );\n    // language, lenght, created\n  }\n}\n\nclass Sorting extends React.Component {\n\n  setSorting(e) {\n\n    const selectedValue = e.target.value;\n\n    if (selectedValue === \"\") {\n\n      this.props.setSorting();\n      return;\n    }\n\n    this.props.setSorting(selectedValue);\n  }\n\n  render() {\n\n    return (\n      <span>Sort by:\n        <select value={this.props.sorting} onChange={this.setSorting.bind(this)}>\n          <option value=\"\">Sort by...</option>\n          <option value=\"title\">Title</option>\n          <option value=\"url\">URL</option>\n          <option value=\"contentLengthInCharacters\">Content length</option>\n          <option value=\"-createdAt\">Date added</option>\n        </select>\n      </span>\n    );\n  }\n}\n\nclass HostFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.hostsCollection.getAll()\n    .then((response) => {\n      this.setState({hosts: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    console.log('HostFilter');\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ hostId: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedHosts = this.state.hosts.sort\n    ((a, b) => {\n      const aData = a.data();\n      const bData = b.data();\n      return aData.hostname.localeCompare(bData.hostname);\n    });\n    let hostElements = sortedHosts.map((host) => {\n\n      return <option key={host.data().id} value={host.data().id}>{host.data().hostname}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by hostname...</option>\n        {hostElements}\n      </select>\n    );\n  }\n}\n\nclass LanguageFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.languageCollection.getAll()\n    .then((response) => {\n      this.setState({items: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ languageCode: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedItems = this.state.items.sort((a, b) => a.data().priorityValue - b.data().priorityValue);\n    let elements = sortedItems.map((item) => {\n\n      return <option key={item.data().code} value={item.data().code}>{item.data().code}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by language...</option>\n        {elements}\n      </select>\n    );\n  }\n}\n\nclass LengthFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    this.props.setFilter({ maxLength: e.target.value });\n  }\n\n  render() {\n\n    return (\n      <span>Max length: <input type=\"text\" className=\"maxLength\" value={this.props.filters.maxLength} onChange={this.setFilter.bind(this)} /></span>\n    );\n  }\n}\n\nclass DateFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setDate(prop, e) {\n\n    const selectedValue = e.target.value;\n\n    let ts;\n    if (selectedValue === \"\") {\n      ts = undefined;\n    } else {\n      ts = moment(selectedValue).startOf(\"day\").toDate().toISOString();\n    }\n\n    const newValues = {};\n    newValues[prop] = ts;\n    this.props.setFilter(newValues);\n  }\n\n  render() {\n\n    const min = moment(this.props.filters.minCreatedAt).format('YYYY-MM-DD');\n    const max = moment(this.props.filters.maxCreatedAt).format('YYYY-MM-DD');\n\n    return (\n      <span>\n        From: <input type=\"date\" name=\"minCreatedAt\" value={min}\n                     onChange={this.setDate.bind(this, 'minCreatedAt')} />\n        To: <input type=\"date\" name=\"maxCreatedAt\" value={max}\n                     onChange={this.setDate.bind(this, 'maxCreatedAt')} />\n      </span>\n    );\n  }\n}\n\nclass PriorityFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ minPriority: value });\n  }\n\n  render() {\n\n    return (\n      <span>\n        Min prio:\n        <select value={this.props.filters.minPriority} onChange={this.setFilter.bind(this)}>\n          <option value=\"\">Min priority...</option>\n          <option value=\"20\">Low</option>\n          <option value=\"15\">Normal</option>\n          <option value=\"10\">High</option>\n        </select>\n      </span>\n    );\n  }\n}\n\nclass ContentTypeFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ contentType: value });\n  }\n\n  render() {\n\n    return (\n      <span>\n        Type:\n        <select value={this.props.filters.contentType} onChange={this.setFilter.bind(this)}>\n          <option value=\"\">Content type...</option>\n          <option value=\"\">All</option>\n          <option value=\"text\">Texts</option>\n          <option value=\"video\">Videos</option>\n        </select>\n      </span>\n    );\n  }\n}\n\nclass IsViewedFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    this.props.setFilter({ isViewed: e.target.checked });\n  }\n\n  render() {\n\n    return (\n      <span>\n        <input type=\"checkbox\" checked={this.props.filters.isViewed} onChange={this.setFilter.bind(this)} />Show viewed items\n      </span>\n    );\n  }\n}\n\n"]}
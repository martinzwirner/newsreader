{"version":3,"sources":["../../js/Filters.js"],"names":["Options","props","setFilter","React","Component","HostFilter","state","myGlobals","hostsCollection","getAll","then","response","setState","hosts","body","loaded","e","console","log","value","target","undefined","hostId","sortedHosts","sort","a","b","aData","data","bData","hostname","localeCompare","hostElements","map","host","id","bind","LanguageFilter","languageCollection","items","languageCode","sortedItems","priorityValue","elements","item","code","LengthFilter","maxLength","DateFilter","selectedValue","minCreatedAt","date","moment","startOf","subtract","realdate","toDate","timestamp","getTime"],"mappings":"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","file":"Filters.js","sourcesContent":["class Options extends React.Component {\n\n  render() {\n    return (\n      <div className='filters'>\n        <HostFilter setFilter={this.props.setFilter} />\n        <LanguageFilter setFilter={this.props.setFilter} />\n        <LengthFilter setFilter={this.props.setFilter} />\n        <DateFilter setFilter={this.props.setFilter} />\n      </div>\n    );\n    // language, lenght, created\n  }\n}\n\nclass HostFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.hostsCollection.getAll()\n    .then((response) => {\n      this.setState({hosts: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    console.log('HostFilter');\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ hostId: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedHosts = this.state.hosts.sort\n    ((a, b) => {\n      const aData = a.data();\n      const bData = b.data();\n      return aData.hostname.localeCompare(bData.hostname);\n    });\n    let hostElements = sortedHosts.map((host) => {\n\n      return <option key={host.data().id} value={host.data().id}>{host.data().hostname}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by hostname...</option>\n        {hostElements}\n      </select>\n    );\n  }\n}\n\nclass LanguageFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    myGlobals.languageCollection.getAll()\n    .then((response) => {\n      this.setState({items: response.body(), loaded: true});\n    });\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ languageCode: value });\n  }\n\n  render() {\n\n    if (!this.state.loaded) {\n\n      return (<option>Loading...</option>);\n    }\n\n    let sortedItems = this.state.items.sort((a, b) => a.data().priorityValue - b.data().priorityValue);\n    let elements = sortedItems.map((item) => {\n\n      return <option key={item.data().code} value={item.data().code}>{item.data().code}</option>;\n    });\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by language...</option>\n        {elements}\n      </select>\n    );\n  }\n}\n\nclass LengthFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const value = e.target.value === \"\" ? undefined : e.target.value;\n    this.props.setFilter({ maxLength: value });\n  }\n\n  render() {\n\n    return (\n      <span>\n        Max Length: <input type=\"text\" onChange={this.setFilter.bind(this)} />\n      </span>\n    );\n  }\n}\n\nclass DateFilter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  setFilter(e) {\n\n    const selectedValue = e.target.value;\n\n    if (selectedValue === \"\") {\n\n      this.props.setFilter({ minCreatedAt: undefined });\n      return;\n    }\n\n    const date = moment().startOf(\"days\").subtract(selectedValue - 1, \"days\");\n    const realdate = date.toDate();\n    const timestamp = realdate.getTime();\n    this.props.setFilter({ minCreatedAt: realdate });\n  }\n\n  render() {\n\n    return (\n      <select onChange={this.setFilter.bind(this)}>\n        <option value=\"\">Filter by age...</option>\n        <option value=\"1\">Today</option>\n        <option value=\"2\">Yesterday</option>\n        <option value=\"7\">This week</option>\n        <option value=\"14\">Two weeks</option>\n        <option value=\"30\">One month</option>\n        <option value=\"60\">Two months</option>\n      </select>\n    );\n  }\n}\n"]}